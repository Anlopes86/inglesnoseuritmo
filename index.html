<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Dashboard | InglÃªs no seu Ritmo</title>
    <meta name="description" content="Plataforma completa para ensino de inglÃªs online. Gerencie alunos, acompanhe progresso e acesse mÃ³dulos do A1 ao C2 com conversaÃ§Ã£o e inglÃªs para negÃ³cios.">
    <meta name="author" content="InglÃªs no seu Ritmo">
    <meta name="robots" content="noindex, nofollow">
    
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ“</text></svg>">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet" crossorigin="anonymous">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="enhanced-styles.css" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js" defer></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .btn-loading::after {
            content: ''; position: absolute; width: 16px; height: 16px; top: 50%; left: 50%;
            margin-left: -8px; margin-top: -8px; border: 2px solid #ffffff; border-radius: 50%;
            border-top-color: transparent; animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .modal-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.6); z-index: 50;
            display: flex; align-items: center; justify-content: center;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 sm:p-8">
        <header class="mb-8" role="banner">
            <div class="text-center relative">
                <h1 class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-teal-600 mb-2">
                    InglÃªs no seu Ritmo
                </h1>
                <p class="text-xl text-gray-500 font-light">Seu painel de controle para o sucesso.</p>
                <button id="logout-btn" class="absolute top-0 right-0 enhanced-btn bg-red-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-red-700 transition-all duration-300 flex items-center gap-2" 
                        aria-label="Sair da plataforma">
                    <i class="fas fa-sign-out-alt" aria-hidden="true"></i>Sair
                </button>
            </div>
        </header>

        <main id="main-content" role="main" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <aside class="lg:col-span-1 space-y-6">
                <div class="enhanced-card p-6">
                    <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center gap-3">
                        <i class="fas fa-users icon-md text-blue-600"></i>
                        Alunos
                    </h2>
                    <button id="open-add-student-modal-btn" class="enhanced-btn w-full bg-blue-600 text-white font-semibold py-2.5 px-6 rounded-lg hover:bg-blue-700 transition-all duration-300 mb-4">
                        <i class="fas fa-plus mr-2"></i>Adicionar Novo Aluno
                    </button>
                    <div class="space-y-3">
                        <input type="text" id="student-search" class="enhanced-input w-full" placeholder="Buscar aluno..." oninput="filterStudents()">
                        <select id="student-select" class="enhanced-input w-full text-lg" aria-label="Selecionar aluno">
                            <option value="">Selecione um aluno...</option>
                        </select>
                    </div>
                    <div id="student-action-buttons" class="mt-4 hidden flex flex-col gap-2">
                        <a id="student-portal-btn" href="#" class="enhanced-btn w-full text-center bg-teal-500 text-white font-semibold py-2.5 px-6 rounded-lg hover:bg-teal-600 transition-all duration-300">
                            <i class="fas fa-id-card mr-2"></i>Acessar Portal do Aluno
                        </a>
                        <button id="delete-student-btn" class="enhanced-btn w-full bg-red-600 text-white font-semibold py-2.5 px-6 rounded-lg hover:bg-red-700 transition-all duration-300">
                            <i class="fas fa-trash-alt mr-2"></i>Excluir Aluno
                        </button>
                    </div>
                </div>
            </aside>

            <div class="lg:col-span-2">
                <div id="no-student-selected" class="enhanced-card p-8 text-center">
                    <i class="fas fa-user-graduate text-6xl text-gray-300 mb-4"></i>
                    <h2 class="text-3xl font-bold text-gray-700">Bem-vindo, professor!</h2>
                    <p class="text-lg text-gray-500 mt-2">Selecione um aluno na lista Ã  esquerda para ver seu progresso e gerenciar o pacote de aulas.</p>
                </div>

                <div id="student-dashboard" class="hidden space-y-8">
                    <section id="package-control-section" class="enhanced-card p-6">
                         <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center gap-3">
                            <i class="fas fa-box-open text-purple-600"></i>
                            Controle de Pacote: <span id="selected-student-name-header" class="font-bold text-purple-700"></span>
                        </h2>
                        
                        <div class="mb-4">
                            <div class="flex justify-between items-center mb-1 font-medium">
                                <span class="text-gray-600">Progresso do Pacote</span>
                                <span id="package-progress-text" class="text-purple-600 font-bold">0 / 0 horas</span>
                            </div>
                            <div class="enhanced-progress"><div id="package-progress-bar" class="enhanced-progress-bar" style="width: 0%; background: linear-gradient(90deg, #9333ea, #db2777);"></div></div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 items-center">
                            <div class="flex items-center justify-center gap-4 bg-gray-100 p-3 rounded-lg">
                                <button id="remove-class-btn" class="enhanced-btn bg-red-500 text-white font-bold py-2 px-4 rounded-lg w-14 text-2xl hover:bg-red-600">-</button>
                                <div class="text-center">
                                    <p class="font-semibold text-gray-800">Aulas Utilizadas</p>
                                    <p id="class-count-display" class="text-4xl font-bold text-blue-600">0</p>
                                </div>
                                <button id="add-class-btn" class="enhanced-btn bg-green-500 text-white font-bold py-2 px-4 rounded-lg w-14 text-2xl hover:bg-green-600">+</button>
                            </div>

                            <div class="space-y-2 bg-gray-100 p-3 rounded-lg text-center md:text-left">
                                <div id="package-details">
                                    <p><i class="fas fa-dollar-sign fa-fw text-green-600 mr-1"></i><strong>Valor:</strong> <span id="package-value-display">R$ 0,00</span></p>
                                    <p><i class="fas fa-calendar-alt fa-fw text-blue-600 mr-1"></i><strong>InÃ­cio:</strong> <span id="package-date-display">--/--/----</span></p>
                                </div>
                                <div id="no-package-message" class="hidden text-center text-red-600 font-semibold p-2 border border-red-200 bg-red-50 rounded-lg">
                                    <i class="fas fa-exclamation-triangle mr-2"></i>Nenhum pacote ativo.
                                </div>
                            </div>
                        </div>

                        <div class="mt-4">
                            <button id="new-package-btn" class="enhanced-btn w-full bg-purple-600 text-white font-semibold py-2.5 rounded-lg hover:bg-purple-700">
                                <i class="fas fa-plus-circle mr-2"></i>Iniciar Novo Pacote
                            </button>
                        </div>
                    </section>

                    <section id="modules">
                        <h2 class="text-2xl font-semibold mb-4 text-gray-800 flex items-center gap-3">
                            <i class="fas fa-graduation-cap text-gray-600"></i>
                            MÃ³dulos do Curso
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            </div>
                    </section>
                </div>
            </div>
        </main>
    </div>

    <div id="add-student-modal" class="modal-backdrop hidden">
        <div class="enhanced-card p-8 rounded-lg shadow-2xl w-full max-w-lg m-4">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Adicionar Novo Aluno</h2>
            <form id="add-student-form" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="text" id="new-student-fullname" class="enhanced-input" placeholder="Nome Completo" required>
                    <input type="text" id="new-student-username" class="enhanced-input" placeholder="Nome de Utilizador" required>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                     <input type="password" id="new-student-password" class="enhanced-input" placeholder="Senha Inicial" required>
                    <select id="new-student-type" class="enhanced-input">
                        <option value="a1">MÃ³dulo (A1)</option>
                        <option value="a2">MÃ³dulo (A2)</option>
                        <option value="conversation">ConversaÃ§Ã£o</option>
                        <option value="business">InglÃªs para NegÃ³cios</option>
                        <option value="vestibular">Dicas para Vestibular</option>
                    </select>
                </div>
                <div class="flex justify-end gap-4 pt-4">
                    <button type="button" id="cancel-add-student-btn" class="enhanced-btn bg-gray-300 text-gray-800 hover:bg-gray-400">Cancelar</button>
                    <button type="submit" id="add-student-btn" class="enhanced-btn bg-blue-600 text-white hover:bg-blue-700">Adicionar Aluno</button>
                </div>
            </form>
        </div>
    </div>

    <div id="new-package-modal" class="modal-backdrop hidden">
        <div class="enhanced-card p-8 rounded-lg shadow-2xl w-full max-w-md m-4">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Iniciar Novo Pacote</h2>
            <form id="new-package-form" class="space-y-4">
                 <div>
                    <label for="package-type" class="block text-sm font-medium text-gray-700 mb-1">Tipo de Pacote</label>
                    <select id="package-type" class="enhanced-input w-full">
                        <option value="16">16 horas</option>
                        <option value="32">32 horas</option>
                    </select>
                </div>
                <div>
                    <label for="package-value-input" class="block text-sm font-medium text-gray-700 mb-1">Valor Pago (R$)</label>
                    <input type="number" id="package-value-input" class="enhanced-input w-full" placeholder="Ex: 700" required>
                </div>
                <div>
                    <label for="package-date-input" class="block text-sm font-medium text-gray-700 mb-1">Data de InÃ­cio</label>
                    <input type="date" id="package-date-input" class="enhanced-input w-full" required>
                </div>
                <p class="text-sm text-gray-500"><i class="fas fa-info-circle mr-1"></i>O contador de aulas serÃ¡ zerado.</p>
                <div class="flex justify-end gap-4 pt-4">
                    <button type="button" id="cancel-package-btn" class="enhanced-btn bg-gray-300 text-gray-800 hover:bg-gray-400">Cancelar</button>
                    <button type="submit" id="confirm-package-btn" class="enhanced-btn bg-purple-600 text-white hover:bg-purple-700">Confirmar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/student-management.js"></script>
</body>
</html>